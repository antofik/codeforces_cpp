<div class="problem-statement"><div class="header"><div class="title">B. Neural Network country</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file"><div class="property-title">input</div>standard input</div><div class="output-file"><div class="property-title">output</div>standard output</div></div><div><p>Due to the recent popularity of the Deep learning new countries are starting to look like Neural Networks. That is, the countries are being built deep with many layers, each layer possibly having many cities. They also have one entry, and one exit point.</p><p>There are exactly <span class="tex-span"><i>L</i></span> layers, each having <span class="tex-span"><i>N</i></span> cities. Let us look at the two adjacent layers <span class="tex-span"><i>L</i><sub class="lower-index">1</sub></span> and <span class="tex-span"><i>L</i><sub class="lower-index">2</sub></span>. Each city from the layer <span class="tex-span"><i>L</i><sub class="lower-index">1</sub></span> is connected to each city from the layer <span class="tex-span"><i>L</i><sub class="lower-index">2</sub></span> with the traveling cost <span class="tex-span"><i>c</i><sub class="lower-index"><i>ij</i></sub></span> for <img align="middle" class="tex-formula" src="/predownloaded/76/e8/76e8025ff87bc3a20fb3c9d793141f719d66fddf.png" style="max-width: 100.0%;max-height: 100.0%;" />, and each pair of adjacent layers has the same cost in between their cities as any other pair (they just stacked the same layers, as usual). Also, the traveling costs to each city from the layer <span class="tex-span"><i>L</i><sub class="lower-index">2</sub></span> are same for all cities in the <span class="tex-span"><i>L</i><sub class="lower-index">1</sub></span>, that is <span class="tex-span"><i>c</i><sub class="lower-index"><i>ij</i></sub></span> is the same for <img align="middle" class="tex-formula" src="/predownloaded/44/6d/446d4e23cf7f52f4d9f44ce69bb9671b742bd891.png" style="max-width: 100.0%;max-height: 100.0%;" />, and fixed <span class="tex-span"><i>j</i></span>.</p><p>Doctor G. needs to speed up his computations for this country so he asks you to find the number of paths he can take from entry to exit point such that his traveling cost is divisible by given number <span class="tex-span"><i>M</i></span>.</p></div><div class="input-specification"><div class="section-title">Input</div><p>The first line of input contains <span class="tex-span"><i>N</i> (1 ≤ <i>N</i> ≤ 10<sup class="upper-index">6</sup>)</span>, <span class="tex-span"><i>L</i> (2 ≤ <i>L</i> ≤ 10<sup class="upper-index">5</sup>)</span> and <span class="tex-span"><i>M</i> (2 ≤ <i>M</i> ≤ 100)</span>, the number of cities in each layer, the number of layers and the number that travelling cost should be divisible by, respectively.</p><p>Second, third and fourth line contain <span class="tex-span"><i>N</i></span> integers each denoting costs <span class="tex-span">0 ≤ <i>cost</i> ≤ <i>M</i></span> from entry point to the first layer, costs between adjacent layers as described above, and costs from the last layer to the exit point.</p></div><div class="output-specification"><div class="section-title">Output</div><p>Output a single integer, the number of paths Doctor G. can take which have total cost divisible by <span class="tex-span"><i>M</i></span>, modulo <span class="tex-span">10<sup class="upper-index">9</sup> + 7</span>.</p></div><div class="sample-tests"><div class="section-title">Example</div><div class="sample-test"><div class="input"><div class="title">Input</div><pre>2 3 13<br />4 6<br />2 1<br />3 4<br /></pre></div><div class="output"><div class="title">Output</div><pre>2</pre></div></div></div><div class="note"><div class="section-title">Note</div><p><img class="tex-graphics" src="/predownloaded/10/59/105931ae42f6790c93cf05d72c5f4ce41c18067d.png" style="max-width: 100.0%;max-height: 100.0%;" /></p><p>This is a country with <span class="tex-span">3</span> layers, each layer having <span class="tex-span">2</span> cities. Paths <img align="middle" class="tex-formula" src="/predownloaded/4d/b4/4db47d39c51712b291e0f37067fc4b04d4568be0.png" style="max-width: 100.0%;max-height: 100.0%;" />, and <img align="middle" class="tex-formula" src="/predownloaded/70/56/7056cab341f1f54fb1f986bd71d1f389f873ceaa.png" style="max-width: 100.0%;max-height: 100.0%;" /> are the only paths having total cost divisible by <span class="tex-span">13</span>. Notice that input edges for layer cities have the same cost, and that they are same for all layers.</p></div></div><p>  </p></div>
</div>


